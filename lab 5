import cv2  # Імпортуємо бібліотеку OpenCV
import numpy as np  # Імпортуємо NumPy для чисельних операцій (не обов’язково в цьому випадку, але часто використовується)

# Відкриваємо відео з веб-камери
cap = cv2.VideoCapture(0)

# Перевіряємо, чи вдалося відкрити камеру
if not cap.isOpened():
    print("Не вдалося відкрити веб-камеру.")
else:
    print("Виявлення країв у відео. Натисніть 'q' для виходу.")

    while True:
        ret, frame = cap.read()  # Зчитуємо кадр з відеопотоку
        if not ret:
            break  # Якщо кадр не зчитано — вихід із циклу

        # === Попередня обробка ===

        gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)  # Перетворюємо зображення в відтінки сірого
        blurred = cv2.GaussianBlur(gray, (5, 5), 1.4)   # Застосовуємо розмивання для зменшення шуму перед виявленням країв

        # === Виявлення країв (Canny) ===
        edges = cv2.Canny(blurred, 50, 150)  # Виявляємо краї (пороги: нижній — 50, верхній — 150)

        # === Відображення результатів ===
        cv2.imshow('Оригінал', frame)  # Показуємо оригінальний кадр
        cv2.imshow('Краї (Canny)', edges)  # Показуємо результат виявлення країв

        # Вихід за натисканням клавіші 'q'
        if cv2.waitKey(1) & 0xFF == ord('q'):
            break

# Звільняємо ресурси
cap.release()
cv2.destroyAllWindows()
